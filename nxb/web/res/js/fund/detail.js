define("fund/detail",["libs/piechart","libs/template"],function(t,e,n){var a=t("libs/piechart"),i=t("libs/template");i.helper("numToPercent",function(t){return(100*t).toFixed(2)+"%"}),i.helper("dateFormate",function(t){var e=t.substring(0,10).split("-");return e[0]+"年"+e[1]+"月"+e[2]+"日"}),i.helper("getNowDate",function(){var t=new Date,e="yyyy-MM-dd h:m:s",n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),"S+":t.getMilliseconds()};/(y+)/i.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in n)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return e});var r={bindEvent:function(){$("body").delegate(".js-tap",$.Func.TAP,function(t){var e=$(this).data("handler");r[e]&&r[e].call(this)})},holdingList:function(t){var e=this,n={jsonrpc:"2.0",method:"Fund.FundHoldStockNoCategory",id:54321,params:{Fundid:t}};$.Func.ajax(n,function(n){var a=n.result,r=0,o=[],d=["#2196F3","#9B58B5","#FF8806","#2196F3","#9B58B5","#FF8806","#2196F3","#9B58B5","#FF8806"];$.each(a.data,function(t,e){r+=e.percent,o.push({data:e.percent,fillStyle:d[t],label:e.stockname})}),o.push({data:1-r,fillStyle:"#FF8806",label:"现金"});var l=i("holding-template",a);$("#holdingList").html(l),e.renderPage(t,r,o)})},operatingList:function(t){var e={jsonrpc:"2.0",method:"Fund.FundOperateRecord",id:54321,params:{Fundid:t,Count:2}};$.Func.ajax(e,function(e){var n=e.result;n.fundid=t;var a=i("operating-template",n);$("#operatingList").html(a)})},renderPage:function(t,e,n){var a=this,r={jsonrpc:"2.0",method:"Fund.FundInfo",id:54321,params:{fundid:t}};$.Func.ajax(r,function(t){var r=t.result;r.data[0].per=e;var o=i("info-template",r.data[0]);$("#info").html(o),a.renderPie(n)})},renderPie:function(t){new a({selector:"#canvas_fan",lineWidth:1,autoline:20,radio:.5,per:.9,textAttr:{fontSize:9,fontWeight:"normal",fontFamily:"Microsoft YaHei"},padding:10,radius:80,animateEnble:!0,type:1}).draw(t)},init:function(){var t=$.Func.getParam("fundid");this.holdingList(t),this.operatingList(t)}};n.exports=r});