define("hawkeye/index",["subscribe","template"],function(t,e,n){var s=t("subscribe"),a=t("template");a.helper("numToPercent",function(t){return(100*t).toFixed(2)}),a.helper("shortDate",function(t){return t.substring(4,6)+"."+t.substring(6)});var r={bindEvent:function(){$("body").delegate(".js-tap",$.Func.TAP,function(t){var e=$(this).data("handler");r[e]&&r[e].call(this)})},getFundid:function(t){var e={jsonrpc:"2.0",method:"EagleEyes.ToFundid",id:54321};$.Func.ajax(e,function(e){e.result&&t&&t(e.result.fundid)})},subscribe:function(){var t=$(this).data("fundid");return!!t&&void($.User.wxgzh?s.subscribeFund($.User.userid,t,function(t){1==t.result.status?$.Func.pop("订阅成功！"):$.Func.pop(t.result.status.msg)}):$.Func.showLayer("#popBindAccount"))},getEye:function(){var t=this,e={jsonrpc:"2.0",method:"EagleEyes.Broadcast",id:54321,params:{}};$.Func.ajax(e,function(e){var n=e.result,s=n.day.toString();n.newDate=s.substring(0,4)+"年"+s.substring(4,6)+"月"+s.substring(6)+"日";var r=a("broadcast-template",n);$("#broadcast").html(r),t.getHistory(s)})},getHistory:function(t){var e={jsonrpc:"2.0",method:"EagleEyes.BroadcastHistory",id:54321,params:{date:t}};$.Func.ajax(e,function(t){var e=t.result,n=a("probability-template",e);$("#probability").html(n)})},getBlockStock:function(t){var e={jsonrpc:"2.0",method:"EagleEyes.BlockStock",id:54321,params:{blockid:885734}};$.Func.ajax(e,function(t){var e=t.result;console.log(e)})},getIndustryStock:function(t){var e={jsonrpc:"2.0",method:"EagleEyes.IndustryStock",id:54321,params:{blockid:885734}};$.Func.ajax(e,function(t){var e=t.result;console.log(e)})},getBlock:function(){var t={jsonrpc:"2.0",method:"EagleEyes.Block",id:54321,params:{}};$.Func.ajax(t,function(t){var e=t.result;if(console.log(e),e&&e.bkdata){e.colors=["bg-blue","bg-pink","bg-yellow","bg-blue","bg-pink","bg-yellow"];var n=a("block-template",e);$("#block").html(n)}else{var n='<li class="empty-li">暂无</li>';$("#block").html(n)}})},init:function(){var t=this;$.Func.getUserInfo(),$.User.wxgzh?t.getFundid(function(e){var n=$.User.userid;s.subscribeList(n,function(a){~$.inArray(e,a)?(t.getEye(),t.getBlock(),t.getBlockStock(),$("#subscribe").removeClass("hide")):($("#noSubscribe").removeClass("hide"),s.vipService(n,function(t){~$.inArray(e,t)?($("#noSubscribe").removeClass("hide"),$("#nosubscribeBtn").html('<a class="btn" href="../../pay/pay.html?fundid='+e+'"><img src="../res/img/hawkeye/yybb_btn.png" width="100%" alt=""/></a>')):s.checkFundFreeStatus(n,e,function(t){1==t?$("#nosubscribeBtn").html('<a href="javascript:;" class="btn js-tap" data-fundid="'+e+'" data-handler="subscribe"><img src="../res/img/hawkeye/yybb_btn.png" width="100%" alt=""/></a>'):$("#nosubscribeBtn").html('<a class="btn" href="../../pay/pay.html?fundid='+e+'"><img src="../res/img/hawkeye/yybb_btn.png" width="100%" alt=""/></a>')})}))})}):$("#noSubscribe").removeClass("hide"),this.bindEvent()}};n.exports=r});